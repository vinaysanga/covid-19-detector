{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1 class="display-4">COVID-19 X-Ray Image Uploader :</h1>
    <hr class="my-4">
    <p class="lead">Upload an image below :</p>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <form id = "my-form" action="{{url_for('result')}}" method="POST" enctype="multipart/form-data">
        <img id="placeholder" src="static/placeholder.png" alt="your image"
         class = "shadow rounded" style="max-width: 50% !important; max-height: auto !important"/><br><br>
        <label class="btn btn-primary">
            Upload File <input id = "upBtn" type = "file" name = "file" hidden/>
        </label>
        <label id = "subOuter" class="btn btn-success">
            Analyze <input id = "subBtn" type = "submit" disabled hidden/>
        </label>
        
    </form>
    <script>
        
        function readURL(input) {
            if (input.files && input.files[0]) {
            var reader = new FileReader();
            
            reader.onload = function(e) {
                $('#placeholder').attr('src', e.target.result);
                $('#subBtn').prop("disabled", false);
            }
            reader.readAsDataURL(input.files[0]); // convert to base64 string
            }
        }
        $("#upBtn").change(function() {
            readURL(this);
        });
    </script>
</div>

{% endblock content %}